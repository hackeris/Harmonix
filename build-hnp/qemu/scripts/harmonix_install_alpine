#/bin/env sh

echo 'Downloading alpine minimal root filesystem'

mkdir -p /data/storage/el2/base/temp
cd /data/storage/el2/base/temp
rm -f alpine-minirootfs.tar.gz
wget https://dl-cdn.alpinelinux.org/alpine/v3.22/releases/aarch64/alpine-minirootfs-3.22.1-aarch64.tar.gz -O alpine-minirootfs.tar.gz
echo 'Done.'

echo 'Preparing alpine minimal root filesystem'
rm -rf /data/storage/el2/base/files/alpine_aarch64
mkdir /data/storage/el2/base/files/alpine_aarch64

cd /data/storage/el2/base/files
tar xvf /data/storage/el2/base/temp/alpine-minirootfs.tar.gz -C alpine_aarch64

echo 'Alpine root filesystem installed to /data/storage/el2/base/files/alpine_aarch64'
echo 'You can run harmonix_run_alpine to start.'